<div>
  <ng-container *ngIf="selectedCity; else showSpinner">
    <div class="relative" (mouseenter)="openSelectHover()"   (mouseleave)="closeSelectHover()">
      <button   (click)="openSelect()" type="button" [ngClass]="{'shadow-lg !rounded-b-none !border-b-0': isSelectOpen}" class="bg-grey-lighter border border-primary-base relative w-full rounded-lg pl-3 pr-10 py-2 text-left cursor-pointer focus:outline-none sm:text-sm" aria-haspopup="listbox" aria-expanded="true" aria-labelledby="listbox-label">
        <span class="block truncate font-RohnRounded-Bold text-primary-base text-sm xs:text-xl">{{ selectedCity.name }}</span>
        <span class="absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none">
          <svg class="h-5 w-5 text-primary-base" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
            <path fill-rule="evenodd" d="M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd" />
          </svg>
        </span>
      </button>

     

      

     
  
      <ul *ngIf="(cities$ | async) as cities" [ngClass]="{'!opacity-100 !visible border border-primary-base': isSelectOpen}" class="opacity-0 invisible transition-opacity ease-out duration-300 w-full  absolute z-10 bg-grey-lighter shadow-lg max-h-60 rounded-b-lg py-1 text-base overflow-auto sm:text-sm" tabindex="-1" role="listbox" aria-labelledby="listbox-label" aria-activedescendant="listbox-option-3">
        <li (click)="setSelectedCity(city)" *ngFor="let city of cities; let i = index" class="text-grey cursor-pointer select-none relative py-2 pl-3 pr-9 hover:bg-grey-light" id="listbox-option-0" role="option">
          <span [ngClass]="{'!font-bold !text-primary-base': city.id === selectedCity.id}" class="font-normal block truncate hover:text-primary-base text-[10px] xs:text-sm ">{{ city.name }}</span>
          <span *ngIf="city.id === selectedCity.id" class="text-primary-base absolute inset-y-0 right-0 flex items-center pr-4">
            <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
              <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
            </svg>
          </span>
        </li>
      </ul>
    </div>
  </ng-container>
  <ng-template #showSpinner>
    <div class="w-48 flex justify-center items-center">
      <ion-spinner name="crescent" color="primary"></ion-spinner>
    </div>
  </ng-template>
</div>


